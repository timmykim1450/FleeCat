Fleecat ë°±ì—”ë“œ  ê°œë°œ  í‘œì¤€  ê°€ì´ë“œ
í”„ë¡œì íŠ¸ëª… : Fleecat ë©€í‹°í…Œë„ŒíŠ¸  ì‡¼í•‘ëª°
ë²„ì „: 1.0
ì‘ì„±ì¼ : 2025ë…„  9 ì›”  30ì¼
ì‘ì„±ì : ë°±ì—”ë“œ  ê°œë°œíŒ€
ê°œì • ì´ë ¥
ë²„ì „ ë³€ê²½ì¼ ë³€ê²½ë‚´ìš© ì‘ì„±ì ìŠ¹ì¸ì
1.0 2025.09.30 ìµœì´ˆ ì‘ì„± ë°±ì—”ë“œíŒ€ -
ëª©ì°¨
1. í”„ë¡œì íŠ¸  ì•½ì–´  ë°  ìš©ì–´  ì •ì˜
2. í”„ë¡œì íŠ¸  ê°œìš”
3. ê¸°ìˆ  ìŠ¤íƒ
4. í”„ë¡œì íŠ¸  êµ¬ì¡°
5. ëª…ëª… ê·œì¹™
6. ì½”ë”© í‘œì¤€
7. ë°ì´í„°ë² ì´ìŠ¤  í‘œì¤€
8. API ê°œë°œ  í‘œì¤€
9. ì¸ì¦ ë°  ë³´ì•ˆ
10. í…ŒìŠ¤íŠ¸  í‘œì¤€
11. ë°°í¬ ë°  ìš´ì˜
12. ë²„ì „ ê´€ë¦¬  ë°  í˜‘ì—…
1. í”„ë¡œì íŠ¸  ì•½ì–´  ë°  ìš©ì–´  ì •ì˜
1.1 ë°±ì—”ë“œ  ì•½ì–´
ë¶„ì•¼ ì˜ë¬¸ëª… ì•½ì–´ ì„¤ëª…
API Application Programming Interface API ì• í”Œë¦¬ì¼€ì´ì…˜  ì¸í„°í˜ì´ìŠ¤
ORM Object-R elational Mapping ORM ê°ì²´-ê´€ê³„  ë§¤í•‘
CRUD Create, R ead, Update, Delete CRUD ê¸°ë³¸ ë°ì´í„°  ì¡°ì‘

ë¶„ì•¼ ì˜ë¬¸ëª… ì•½ì–´ ì„¤ëª…
JWT JSON W eb Token JWTì¸ì¦ í† í°
RLS Row Level Security RLS í–‰ ìˆ˜ì¤€  ë³´ì•ˆ
BaaS Backend as a Service BaaS ë°±ì—”ë“œ  ì„œë¹„ìŠ¤
1.2 ë„ë©”ì¸  ìš©ì–´
í•œê¸€ëª… ì˜ë¬¸ëª… ì•½ì–´ ì„¤ëª…
íŒë§¤ì‚¬ Tenant - ê³µë°©, ìŠ¤í† ì–´  ìš´ì˜  ì£¼ì²´
íŒë§¤ì Seller - íŒë§¤ì‚¬  ì†Œì†  êµ¬ì„±ì›
êµ¬ë§¤ì Buyer - ìƒí’ˆ êµ¬ë§¤  íšŒì›
ë©€í‹°í…Œë„ŒíŠ¸ Multi-tenant MT ì—¬ëŸ¬ íŒë§¤ì‚¬  ì§€ì›  êµ¬ì¡°
2. í”„ë¡œì íŠ¸  ê°œìš”
2.1 í”„ë¡œì íŠ¸  ì •ë³´
í•­ëª© ë‚´ìš©
í”„ë¡œì íŠ¸ëª… Fleecat ë©€í‹°í…Œë„ŒíŠ¸  ì‡¼í•‘ëª°
í”„ë¡œì íŠ¸  ìœ í˜• E-commerce Platform (B2C, C2C)
í•µì‹¬ ê¸°ëŠ¥ ìƒí’ˆ ê´€ë¦¬ , ì£¼ë¬¸ / ê²°ì œ , íšŒì›  ê´€ë¦¬ , íŒë§¤ì  ê´€ë¦¬
ë°ì´í„°ë² ì´ìŠ¤ PostgreSQL (via Supabase)
ì´ í…Œì´ë¸”  ìˆ˜ 17ê°œ
2.2 ì£¼ìš”  ë¹„ì¦ˆë‹ˆìŠ¤  í”„ë¡œì„¸ìŠ¤
1. íŒë§¤ì  ë“±ë¡  í”„ë¡œì„¸ìŠ¤
   íšŒì›ê°€ì…  â†’ íŒë§¤ì  ì‹ ì²­  â†’ ê´€ë¦¬ì  ìŠ¹ì¸  â†’ ìƒí’ˆ  ë“±ë¡
2. ìƒí’ˆ  íŒë§¤  í”„ë¡œì„¸ìŠ¤
   ìƒí’ˆ ë“±ë¡  â†’ ê´€ë¦¬ì  ìŠ¹ì¸  â†’ ìƒí’ˆ  ë…¸ì¶œ  â†’ ì£¼ë¬¸  â†’ ë°°ì†¡
3. ì£¼ë¬¸  ì²˜ë¦¬  í”„ë¡œì„¸ìŠ¤
   ì¥ë°”êµ¬ë‹ˆ  â†’ ì£¼ë¬¸  ìƒì„±  â†’ ê²°ì œ  â†’ ë°°ì†¡  â†’ êµ¬ë§¤  í™•ì •

3. ê¸°ìˆ   ìŠ¤íƒ
3.1 í•µì‹¬  ê¸°ìˆ 
êµ¬ë¶„ ê¸°ìˆ  ë²„ì „ ì—­í• 
ëŸ°íƒ€ì„ Node.js 20.x L TS JavaScript ì‹¤í–‰  í™˜ê²½
í”„ë ˆì„ì›Œí¬ Express.js 4.x ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜  í”„ë ˆì„ì›Œí¬
ORM Prisma 5.x ë°ì´í„°ë² ì´ìŠ¤  ORM
BaaS Supabase Latest ë°ì´í„°ë² ì´ìŠ¤ , ì¸ì¦ , ìŠ¤í† ë¦¬ì§€
3.2 ì£¼ìš”  ë¼ì´ë¸ŒëŸ¬ë¦¬
ë¼ì´ë¸ŒëŸ¬ë¦¬ ìš©ë„
@supabase/supabase-js Supabase í´ë¼ì´ì–¸íŠ¸
@prisma/client Prisma í´ë¼ì´ì–¸íŠ¸
jsonwebtoken JWT ì¸ì¦
bcrypt ë¹„ë°€ë²ˆí˜¸  ì•”í˜¸í™”
express-validator ì…ë ¥ ê²€ì¦
cors CORS ì„¤ì •
helmet ë³´ì•ˆ í—¤ë”
morgan HTTP ë¡œê¹…
dotenv í™˜ê²½ë³€ìˆ˜  ê´€ë¦¬
4. í”„ë¡œì íŠ¸  êµ¬ì¡°
fleecat-backend/
â”œâ”€â”€  prisma/                    # Prisma ì„¤ì •
â”‚   â”œâ”€â”€  schema.prisma         # ë°ì´í„°ë² ì´ìŠ¤  ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€  migrations/           # ë§ˆì´ê·¸ë ˆì´ì…˜  íŒŒì¼
â”‚   â””â”€â”€  seed.js               # ì´ˆê¸°  ë°ì´í„°
â”‚
â”œâ”€â”€  src/                      # ì†ŒìŠ¤  ì½”ë“œ
â”‚   â”œâ”€â”€  config/               # ì„¤ì •  íŒŒì¼
â”‚   â”‚    â”œâ”€â”€  database.js      # DB ì—°ê²°  ì„¤ì •
â”‚   â”‚    â”œâ”€â”€  supabase.js      # Supabase ì„¤ì •
â”‚   â”‚    â””â”€â”€  constants.js     # ìƒìˆ˜  ì •ì˜
â”‚   â”‚
â”‚   â”œâ”€â”€  middlewares/          # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚    â”œâ”€â”€  auth.js          # ì¸ì¦  ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚    â”œâ”€â”€  validation.js    # ê²€ì¦  ë¯¸ë“¤ì›¨ì–´

â”‚   â”‚    â”œâ”€â”€  errorHandler.js  # ì—ëŸ¬  í•¸ë“¤ëŸ¬
â”‚   â”‚    â””â”€â”€  rateLimiter.js   # Rate Limiting
â”‚   â”‚
â”‚   â”œâ”€â”€  routes/               # ë¼ìš°í„°
â”‚   â”‚    â”œâ”€â”€  index.js         # ë¼ìš°í„°  í†µí•©
â”‚   â”‚    â”œâ”€â”€  auth.routes.js   # ì¸ì¦  ë¼ìš°íŠ¸
â”‚   â”‚    â”œâ”€â”€  product.routes.js # ìƒí’ˆ  ë¼ìš°íŠ¸
â”‚   â”‚    â”œâ”€â”€  order.routes.js   # ì£¼ë¬¸  ë¼ìš°íŠ¸
â”‚   â”‚    â”œâ”€â”€  cart.routes.js    # ì¥ë°”êµ¬ë‹ˆ  ë¼ìš°íŠ¸
â”‚   â”‚    â”œâ”€â”€  member.routes.js  # íšŒì›  ë¼ìš°íŠ¸
â”‚   â”‚    â””â”€â”€  admin.routes.js   # ê´€ë¦¬ì  ë¼ìš°íŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€  controllers/          # ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚    â”œâ”€â”€  auth.controller.js
â”‚   â”‚    â”œâ”€â”€  product.controller.js
â”‚   â”‚    â”œâ”€â”€  order.controller.js
â”‚   â”‚    â””â”€â”€  ...
â”‚   â”‚
â”‚   â”œâ”€â”€  services/             # ë¹„ì¦ˆë‹ˆìŠ¤  ë¡œì§
â”‚   â”‚    â”œâ”€â”€  auth.service.js
â”‚   â”‚    â”œâ”€â”€  product.service.js
â”‚   â”‚    â”œâ”€â”€  order.service.js
â”‚   â”‚    â””â”€â”€  ...
â”‚   â”‚
â”‚   â”œâ”€â”€  repositories/         # ë°ì´í„°  ì ‘ê·¼  ê³„ì¸µ
â”‚   â”‚    â”œâ”€â”€  product.repository.js
â”‚   â”‚    â”œâ”€â”€  order.repository.js
â”‚   â”‚    â””â”€â”€  ...
â”‚   â”‚
â”‚   â”œâ”€â”€  utils/                # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚    â”œâ”€â”€  logger.js        # ë¡œê¹…
â”‚   â”‚    â”œâ”€â”€  validator.js     # ê²€ì¦  í•¨ìˆ˜
â”‚   â”‚    â”œâ”€â”€  helpers.js       # í—¬í¼  í•¨ìˆ˜
â”‚   â”‚    â””â”€â”€  response.js      # ì‘ë‹µ  í¬ë§·í„°
â”‚   â”‚
â”‚   â”œâ”€â”€  types/                # T ypeScript íƒ€ì…  ì •ì˜
â”‚   â”‚    â””â”€â”€  index.d.ts
â”‚   â”‚
â”‚   â””â”€â”€  app.js                # Express ì•±  ì„¤ì •
â”‚   â””â”€â”€  server.js             # ì„œë²„  ì‹¤í–‰
â”‚
â”œâ”€â”€  tests/                    # í…ŒìŠ¤íŠ¸  ì½”ë“œ
â”‚   â”œâ”€â”€  unit/                 # ë‹¨ìœ„  í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€  integration/          # í†µí•©  í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€  e2e/                  # E2E í…ŒìŠ¤íŠ¸
â”‚
â”œâ”€â”€  docs/                     # ë¬¸ì„œ

5. ëª…ëª…  ê·œì¹™
5.1 íŒŒì¼ëª…  ê·œì¹™
ìœ í˜• ê·œì¹™ ì˜ˆì‹œ
ë¼ìš°í„° [ë„ë©”ì¸ ].routes.js product.routes.js
ì»¨íŠ¸ë¡¤ëŸ¬ [ë„ë©”ì¸ ].controller.js product.controller.js
ì„œë¹„ìŠ¤ [ë„ë©”ì¸ ].service.js product.service.js
ë¯¸ë“¤ì›¨ì–´ [ê¸°ëŠ¥ ].js auth.js, validation.js
ìœ í‹¸ë¦¬í‹° [ê¸°ëŠ¥ ].js logger.js, helpers.js
í…ŒìŠ¤íŠ¸ [ëŒ€ìƒ ].test.js product.service.test.js
5.2 ë³€ìˆ˜ëª…  ê·œì¹™â”‚   â”œâ”€â”€  api/                  # API ë¬¸ì„œ
â”‚   â”œâ”€â”€  architecture/         # ì•„í‚¤í…ì²˜  ë¬¸ì„œ
â”‚   â””â”€â”€  database/             # DB ë¬¸ì„œ
â”‚
â”œâ”€â”€  scripts/                  # ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€  setup.sh             # ì´ˆê¸°  ì„¤ì •
â”‚   â””â”€â”€  deploy.sh            # ë°°í¬  ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€  .env.example              # í™˜ê²½ë³€ìˆ˜  ì˜ˆì‹œ
â”œâ”€â”€  .env.development          # ê°œë°œ  í™˜ê²½ë³€ìˆ˜
â”œâ”€â”€  .env.production           # ìš´ì˜  í™˜ê²½ë³€ìˆ˜
â”œâ”€â”€  .gitignore                # Git ë¬´ì‹œ  íŒŒì¼
â”œâ”€â”€  .eslintrc.js              # ESLint ì„¤ì •
â”œâ”€â”€  .prettierrc               # Prettier ì„¤ì •
â”œâ”€â”€  package.json              # íŒ¨í‚¤ì§€  ì •ë³´
â”œâ”€â”€  package-lock.json         # íŒ¨í‚¤ì§€  ì ê¸ˆ
â””â”€â”€  README.md                 # í”„ë¡œì íŠ¸  ì„¤ëª…
javascript

5.3 í•¨ìˆ˜ëª…  ê·œì¹™
ìœ í˜• ê·œì¹™ ì˜ˆì‹œ
ì¡°íšŒ get, find, fetch getUserById, findProducts
ìƒì„± create, add createOrder, addToCart
ìˆ˜ì • update, modify updateProduct, modifyStatus
ì‚­ì œ delete, remove deleteProduct, removeFromCart
ê²€ì¦ validate, check validateEmail, checkStock
ì²˜ë¦¬ process, handle processPayment, handleOrder
5.4 API ì—”ë“œí¬ì¸íŠ¸  ê·œì¹™// ìƒìˆ˜ : UPPER_SNAKE_CASE
const  MAX_L OGIN_A T TEMPT S = 5;
const  JW T_SECRET  = process .env. JW T_SECRET ;
// ë³€ìˆ˜ /í•¨ìˆ˜ : camelCas e
const  userId = 123;
const  productList = [];
function  getUserById (id) { }
// í´ë˜ìŠ¤ : PascalCas e
class  ProductService  { }
class  OrderController  { }
// Private ë³€ìˆ˜ : _camelCas e
class  UserService  {
  _connection = null;
  _cache = {};
}
// ë°ì´í„°ë² ì´ìŠ¤  ê´€ë ¨
const  prisma = new PrismaClient ();
const  supabase = createClient (url, key);
ê¸°ë³¸ í˜•ì‹ : /api/v1/[ ë¦¬ì†ŒìŠ¤ ]/[ í•˜ìœ„ë¦¬ì†ŒìŠ¤ ]
GET     /api/v1/products              # ìƒí’ˆ  ëª©ë¡  ì¡°íšŒ
GET     /api/v1/products/:id          # ìƒí’ˆ  ìƒì„¸  ì¡°íšŒ
POST    /api/v1/products              # ìƒí’ˆ  ìƒì„±
PUT     /api/v1/products/:id          # ìƒí’ˆ  ìˆ˜ì •
DELETE  /api/v1/products/:id          # ìƒí’ˆ  ì‚­ì œ

6. ì½”ë”©  í‘œì¤€
6.1 JavaScript ì½”ë”©  í‘œì¤€
Impor t ìˆœì„œ
í•¨ìˆ˜ ì‘ì„±  ê·œì¹™# í•˜ìœ„  ë¦¬ì†ŒìŠ¤
GET     /api/v1/products/:id/images   # ìƒí’ˆ  ì´ë¯¸ì§€  ëª©ë¡
POST    /api/v1/products/:id/images   # ìƒí’ˆ  ì´ë¯¸ì§€  ì¶”ê°€
# íŠ¹ìˆ˜  ì•¡ì…˜
POST    /api/v1/orders/:id/cancel     # ì£¼ë¬¸  ì·¨ì†Œ
POST    /api/v1/orders/:id/confirm    # ì£¼ë¬¸  í™•ì •
javascript
// 1. Node.js ë‚´ì¥  ëª¨ë“ˆ
const  fs = require ('fs');
const  path = require ('path' );
// 2. ì™¸ë¶€  ë¼ì´ë¸ŒëŸ¬ë¦¬
const  express = require ('express' );
const  { PrismaClient  } = require ('@prisma/client' );
// 3. ë‚´ë¶€  ëª¨ë“ˆ
const  { authenticate } = require ('../middlewares/auth' );
const  ProductService  = require ('../services/product.service' );
javascript

ì—ëŸ¬ ì²˜ë¦¬/**
 * ìƒí’ˆ  ëª©ë¡  ì¡°íšŒ
 * @p ar am { Object} filters - í•„í„°  ì¡°ê±´
 * @p ar am { number} filters.categoryId - ì¹´í…Œê³ ë¦¬  ID
 * @p ar am { number} filters.minPr ice - ìµœì†Œ  ê°€ê²©
 * @p ar am { number} filters.maxPr ice - ìµœëŒ€  ê°€ê²©
 * @p ar am { Object} pagination  - í˜ì´ì§€ë„¤ì´ì…˜
 * @p ar am { number} pagination.page - í˜ì´ì§€  ë²ˆí˜¸
 * @p ar am { number} pagination.limit - í˜ì´ì§€ë‹¹  ê°œìˆ˜
 * @r etur ns { Pr omis e< Object>} ìƒí’ˆ  ëª©ë¡ê³¼  ì´  ê°œìˆ˜
 */
async  function  getProducts (filters = {}, pagination = {}) {
  const  { categoryId , minPrice , maxPrice } = filters ;
  const  { page = 1, limit = 20 } = pagination ;
  
  // êµ¬í˜„ ...
}
javascript
// ì»¤ìŠ¤í…€  ì—ëŸ¬  í´ë˜ìŠ¤
class  V alidationError  extends  Error  {
  constructor (message ) {
    super (message );
    this.name  = 'ValidationError' ;
    this.statusCode  = 400;
  }
}
class  NotFoundError  extends  Error  {
  constructor (message ) {
    super (message );
    this.name  = 'NotFoundError' ;
    this.statusCode  = 404;
  }
}
// ì‚¬ìš©  ì˜ˆì‹œ
if (!product ) {
  throw  new NotFoundError ('ìƒí’ˆì„  ì°¾ì„  ìˆ˜  ì—†ìŠµë‹ˆë‹¤ ');
}

6.2 ë¹„ë™ê¸°  ì²˜ë¦¬
6.3 í™˜ê²½ë³€ìˆ˜  ê´€ë¦¬javascript
// âœ…  ê¶Œì¥ : async/await ì‚¬ìš©
async  function  createOrder (orderData ) {
  try {
    const  order = await  prisma .order .create ({
      data: orderData
    });
    return  order ;
  } catch  (error ) {
    throw  new Error (`ì£¼ë¬¸ ìƒì„±  ì‹¤íŒ¨ : ${error .message }`);
  }
}
// âŒ  ë¹„ê¶Œì¥ : ì½œë°±  ì‚¬ìš©
function  createOrder (orderData , callback ) {
  // ì½œë°±  í—¬  ë°œìƒ  ê°€ëŠ¥
}
javascript

7. ë°ì´í„°ë² ì´ìŠ¤  í‘œì¤€
7.1 Prisma Schema ê·œì¹™// config/constants.js
require ('dotenv' ).config ();
module .exports  = {
  // ì„œë²„  ì„¤ì •
  POR T: process .env. POR T || 3000 ,
  NODE_ENV: process .env. NODE_ENV  || 'development' ,
  
  // ë°ì´í„°ë² ì´ìŠ¤
  D A T ABASE_URL: process .env. D A T ABASE_URL ,
  
  // Sup abase
  SUP ABASE_URL: process .env. SUP ABASE_URL ,
  SUP ABASE_KEY: process .env. SUP ABASE_KEY ,
  
  // JW T
  JW T_SECRET: process .env. JW T_SECRET ,
  JW T_EXPIRES_IN : process .env. JW T_EXPIRES_IN  || '7d',
  
  // ê¸°íƒ€
  MAX_FILE_SIZE : 5 * 1024  * 1024 , // 5MB
  ALL O WED_ORIGINS : process .env. ALL O WED_ORIGINS ?.split(',') || []
};
prisma

7.2 ì¿¼ë¦¬  ì‘ì„±  ê·œì¹™// schema.prisma
generator client {
  provider = "prisma-client-js"
}
datasource db {
  provider = "postgresql"
  url      = env("D ATABASE_URL")
}
// ëª¨ë¸  ì •ì˜  ê·œì¹™
model Product {
  // 1. ID í•„ë“œ  ( í•­ìƒ  ì²«  ë²ˆì§¸ )
  product_id          BigInt    @id @default(autoincrement())
  
  // 2. í•„ìˆ˜  í•„ë“œ
  product_name        S tring    @db.V arChar(100)
  product_price       Decimal   @db.Decimal(10, 2)
  product_status      S tring    @default("inactive") @db.V arChar(20)
  
  // 3. Foreign K ey
  tenant_member_id    BigInt
  category_id         BigInt    @default(0)
  
  // 4. íƒ€ì„ìŠ¤íƒ¬í”„
  product_created_at  DateTime  @default(now())
  product_updated_at  DateTime  @updatedAt
  
  // 5. ê´€ê³„  ì •ì˜
  tenant_member       T enantMember @relation(fields: [tenant_member_id], references: [tenant_member_id])
  category            Category     @relation(fields: [category_id], references: [category_id])
  product_images      ProductImage[]
  
  // 6. í…Œì´ë¸”ëª…  ë§¤í•‘
  @@map("product")
  
  // 7. ì¸ë±ìŠ¤
  @@index([tenant_member_id])
  @@index([category_id])
  @@index([product_status])
}
javascript

7.3 íŠ¸ëœì­ì…˜  ì²˜ë¦¬// âœ…  ê¶Œì¥ : í•„ìš”í•œ  í•„ë“œë§Œ  ì„ íƒ
const  products = await  prisma .product .findMany ({
  select: {
    product_id: true,
    product_name : true,
    product_price : true,
    tenant_member : {
      select: {
        tenant: {
          select: {
            tenant_name : true
          }
        }
      }
    }
  }
});
// âŒ  ë¹„ê¶Œì¥ : ëª¨ë“   í•„ë“œ  ì¡°íšŒ
const  products = await  prisma .product .findMany ();
javascript

8. API ê°œë°œ  í‘œì¤€
8.1 ê³„ì¸µ  êµ¬ì¡°// ì£¼ë¬¸  ìƒì„±  íŠ¸ëœì­ì…˜
async  function  createOrder (orderData , items ) {
  return  await  prisma .$transaction ( async  (tx) => {
    // 1. ì£¼ë¬¸  ìƒì„±
    const  order = await  tx.order .create ({
      data: orderData
    });
    
    // 2. ì£¼ë¬¸  ìƒì„¸  ìƒì„±
    await  tx.orderItem .createMany ({
      data: items .map(item => ({
        order_id: order .order_id ,
        ...item
      }))
    });
    
    // 3. ì¬ê³   ê°ì†Œ
    for ( const  item of items ) {
      await  tx.product .update ({
        where: { product_id: item .product_id  },
        data: {
          product_quantity : {
            decrement: item .quantity
          }
        }
      });
    }
    
    return  order ;
  });
}
Client R equest
     â†“
Route (ë¼ìš°íŒ… )
     â†“
Middleware ( ê²€ì¦ , ì¸ì¦ )
     â†“
Controller ( ìš”ì²­ / ì‘ë‹µ  ì²˜ë¦¬ )
     â†“

8.2 ë¼ìš°í„°  ì‘ì„±
8.3 ì»¨íŠ¸ë¡¤ëŸ¬  ì‘ì„±Service ( ë¹„ì¦ˆë‹ˆìŠ¤  ë¡œì§ )
     â†“
Repository (ë°ì´í„°  ì ‘ê·¼ )
     â†“
Database
javascript
// routes/pr oduct.r outes.js
const  express = require ('express' );
const  router = express .Router ();
const  ProductController  = require ('../controllers/product.controller' );
const  { authenticate } = require ('../middlewares/auth' );
const  { validateProduct } = require ('../middlewares/validation' );
// ê³µê°œ  API
router .get('/', ProductController .getProducts );
router .get('/:id', ProductController .getProductById );
// ì¸ì¦  í•„ìš”  API
router .post('/', 
  authenticate , 
  validateProduct , 
  ProductController .createProduct
);
router .put('/:id',
  authenticate ,
  validateProduct ,
  ProductController .updateProduct
);
router .delete ('/:id',
  authenticate ,
  ProductController .deleteProduct
);
module .exports  = router ;
javascript

// controllers/product.c ontroller.js
const  ProductService  = require ('../services/product.service' );
const  { successR esponse , errorR esponse } = require ('../utils/response' );
class  ProductController  {
  /**
   * ìƒí’ˆ  ëª©ë¡  ì¡°íšŒ
   */
  async  getProducts (req, res, next ) {
    try {
      const  { categoryId , minPrice , maxPrice , page , limit } = req.query ;
      
      const  result = await  ProductService .getProducts ({
        categoryId: categoryId ? parseInt (categoryId ) : undefined ,
        minPrice: minPrice ? parseFloat (minPrice ) : undefined ,
        maxPrice: maxPrice ? parseFloat (maxPrice ) : undefined
      }, {
        page: page ? parseInt (page ) : 1,
        limit: limit ? parseInt (limit) : 20
      });
      
      return  successResponse (res, result , 'ìƒí’ˆ  ëª©ë¡  ì¡°íšŒ  ì„±ê³µ ');
    } catch  (error ) {
      next(error );
    }
  }
  
  /**
   * ìƒí’ˆ  ìƒì„±
   */
  async  createProduct (req, res, next ) {
    try {
      const  userId = req.user.id; // ì¸ì¦  ë¯¸ë“¤ì›¨ì–´ì—ì„œ  ì„¤ì •
      const  productData = req.body ;
      
      const  product = await  ProductService .createProduct (userId , productData );
      
      return  successResponse (res, product , 'ìƒí’ˆ  ë“±ë¡  ì„±ê³µ ', 201);
    } catch  (error ) {
      next(error );
    }
  }
}
module .exports  = new ProductController ();

8.4 ì„œë¹„ìŠ¤  ì‘ì„±
javascript

// services/pr oduct.s ervice.js
const  ProductR epository  = require ('../repositories/product.repository' );
const  { V alidationError , NotFoundError  } = require ('../utils/errors' );
class  ProductService  {
  /**
   * ìƒí’ˆ  ëª©ë¡  ì¡°íšŒ
   */
  async  getProducts (filters , pagination ) {
    const  products = await  ProductR epository .findMany (filters , pagination );
    const  total = await  ProductR epository .count (filters );
    
    return  {
      products ,
      pagination: {
        page: pagination .page ,
        limit: pagination .limit,
        total ,
        totalP ages: Math .ceil(total / pagination .limit)
      }
    };
  }
  
  /**
   * ìƒí’ˆ  ìƒì„±
   */
  async  createProduct (userId , productData ) {
    // ë¹„ì¦ˆë‹ˆìŠ¤  ë¡œì§  ê²€ì¦
    if (productData .product_price  <= 0) {
      throw  new V alidationError ('ê°€ê²©ì€  0 ë³´ë‹¤  ì»¤ì•¼  í•©ë‹ˆë‹¤ ');
    }
    
    // íŒë§¤ì  ê¶Œí•œ  í™•ì¸
    const  seller = await  this._checkSellerP ermission (userId );
    
    // ìƒí’ˆ  ìƒì„±
    const  product = await  ProductR epository .create ({
      ...productData ,
      tenant_member_id : seller .tenant_member_id
    });
    
    return  product ;
  }
  
  /**
   * íŒë§¤ì  ê¶Œí•œ  í™•ì¸  (private)

8.5 R eposit ory ì‘ì„±   */
  async  _checkSellerP ermission (userId ) {
    // êµ¬í˜„ ...
  }
}
module .exports  = new ProductService ();
javascript

// reposit ories/pr oduct.r eposit ory.js
const  { PrismaClient  } = require ('@prisma/client' );
const  prisma = new PrismaClient ();
class  ProductR epository  {
  /**
   * ìƒí’ˆ  ëª©ë¡  ì¡°íšŒ
   */
  async  findMany (filters = {}, pagination = {}) {
    const  { categoryId , minPrice , maxPrice } = filters ;
    const  { page = 1, limit = 20 } = pagination ;
    
    const  where = {};
    
    if (categoryId ) where .category_id  = parseInt (categoryId );
    if (minPrice ) where .product_price  = { gte: parseFloat (minPrice ) };
    if (maxPrice ) {
      where .product_price  = {
        ...where .product_price ,
        lte: parseFloat (maxPrice )
      };
    }
    
    return  await  prisma .product .findMany ({
      where ,
      include: {
        tenant_member : {
          select: {
            tenant: {
              select: {
                tenant_name : true
              }
            }
          }
        },
        product_images : {
          where: { product_image_sequence : 0 },
          take: 1
        }
      },
      skip: (page - 1) * limit ,
      take: limit ,
      orderBy: { product_created_at : 'desc'  }
    });
  }
  

8.6 ì‘ë‹µ  í¬ë§·  /**
   * ìƒí’ˆ  ìƒì„±
   */
  async  create (data) {
    return  await  prisma .product .create ({
      data ,
      include: {
        tenant_member : true,
        category: true
      }
    });
  }
  
  /**
   * ìƒí’ˆ  ê°œìˆ˜  ì¡°íšŒ
   */
  async  count (filters = {}) {
    const  { categoryId , minPrice , maxPrice } = filters ;
    const  where = {};
    
    if (categoryId ) where .category_id  = parseInt (categoryId );
    if (minPrice || maxPrice ) {
      where .product_price  = {};
      if (minPrice ) where .product_price .gte = parseFloat (minPrice );
      if (maxPrice ) where .product_price .lte = parseFloat (maxPrice );
    }
    
    return  await  prisma .product .count ({ where });
  }
}
module .exports  = new ProductR epository ();
javascript

9. ì¸ì¦  ë°  ë³´ì•ˆ
9.1 JW T ì¸ì¦// utils/r espons e.js
/**
 * ì„±ê³µ  ì‘ë‹µ
 */
function  successResponse (res, data , message = 'Success' , statusCode = 200) {
  return  res.status (statusCode ).json({
    success: true,
    message ,
    data
  });
}
/**
 * ì—ëŸ¬  ì‘ë‹µ
 */
function  errorResponse (res, message , statusCode = 500, errors = null) {
  const  response = {
    success: false,
    message
  };
  
  if (errors ) {
    response .errors  = errors ;
  }
  
  return  res.status (statusCode ).json(response );
}
module .exports  = {
  successR esponse ,
  errorR esponse
};
javascript

// middlewar es/auth.js
const  jwt = require ('jsonwebtoken' );
const  { JW T_SECRET  } = require ('../config/constants' );
const  { errorR esponse } = require ('../utils/response' );
/**
 * JW T í† í°  ìƒì„±
 */
function  generateToken (payload ) {
  return  jwt.sign(payload , JW T_SECRET , {
    expiresIn: '7d'
  });
}
/**
 * JW T ì¸ì¦  ë¯¸ë“¤ì›¨ì–´
 */
function  authenticate (req, res, next ) {
  try {
    const  token = req.headers .authorization ?.split(' ')[ 1];
    
    if (!token ) {
      return  errorResponse (res, 'ì¸ì¦  í† í°ì´  í•„ìš”í•©ë‹ˆë‹¤ ', 401);
    }
    
    const  decoded = jwt.verify (token , JW T_SECRET );
    req .user = decoded ;
    next();
  } catch  (error ) {
    return  errorResponse (res, 'ìœ íš¨í•˜ì§€  ì•Šì€  í† í°ì…ë‹ˆë‹¤ ', 401);
  }
}
/**
 * ê¶Œí•œ  í™•ì¸  ë¯¸ë“¤ì›¨ì–´
 */
function  authorize (...roles ) {
  return  (req, res, next ) => {
    if (!req.user) {
      return  errorResponse (res, 'ì¸ì¦ì´  í•„ìš”í•©ë‹ˆë‹¤ ', 401);
    }
    
    if (!roles .includes (req.user.role)) {
      return  errorResponse (res, 'ê¶Œí•œì´  ì—†ìŠµë‹ˆë‹¤ ', 403);
    }
    

9.2 ì…ë ¥  ê²€ì¦    next();
  };
}
module .exports  = {
  generateT oken ,
  authenticate ,
  authorize
};
javascript

// middlewar es/validation.js
const  { body , validationR esult } = require ('express-validator' );
const  { errorR esponse } = require ('../utils/response' );
/**
 * ê²€ì¦  ê²°ê³¼  í™•ì¸
 */
function  validateResult (req, res, next ) {
  const  errors = validationResult (req);
  if (!errors .isEmpty ()) {
    return  errorResponse (res, 'ì…ë ¥ê°’ì´  ì˜¬ë°”ë¥´ì§€  ì•ŠìŠµë‹ˆë‹¤ ', 400, errors .array ());
  }
  next();
}
/**
 * ìƒí’ˆ  ê²€ì¦
 */
const  validateProduct = [
  body ('product_name' )
    .trim()
    .notEmpty ().withMessage ('ìƒí’ˆëª…ì€  í•„ìˆ˜ì…ë‹ˆë‹¤ ')
    .isLength ({ max: 100 }).withMessage ('ìƒí’ˆëª…ì€  100ì  ì´í•˜ì—¬ì•¼  í•©ë‹ˆë‹¤ '),
  
  body ('product_price' )
    .isFloat ({ min: 0 }).withMessage ('ê°€ê²©ì€  0 ì´ìƒì´ì–´ì•¼  í•©ë‹ˆë‹¤ '),
  
  body ('product_quantity' )
    .isInt({ min: 0 }).withMessage ('ì¬ê³ ëŠ”  0 ì´ìƒì´ì–´ì•¼  í•©ë‹ˆë‹¤ '),
  
  body ('category_id' )
    .isInt().withMessage ('ì¹´í…Œê³ ë¦¬  ID ê°€  í•„ìš”í•©ë‹ˆë‹¤ '),
  
  validateR esult
];
/**
 * ì£¼ë¬¸  ê²€ì¦
 */
const  validateOrder = [
  body ('order_recipient_name' )
    .trim()
    .notEmpty ().withMessage ('ìˆ˜ë ¹ì¸  ì´ë¦„ì€  í•„ìˆ˜ì…ë‹ˆë‹¤ '),
  
  body ('order_recipient_phone' )
    .matches (/^010-\d{4}-\d{4}$ /).withMessage ('íœ´ëŒ€í°  í˜•ì‹ì´  ì˜¬ë°”ë¥´ì§€  ì•ŠìŠµë‹ˆë‹¤ '),

9.3 ë³´ì•ˆ  ë¯¸ë“¤ì›¨ì–´  
  body ('order_recipient_address' )
    .trim()
    .notEmpty ().withMessage ('ë°°ì†¡ì§€  ì£¼ì†ŒëŠ”  í•„ìˆ˜ì…ë‹ˆë‹¤ '),
  
  validateR esult
];
module .exports  = {
  validateProduct ,
  validateOrder ,
  validateR esult
};
javascript

10. í…ŒìŠ¤íŠ¸  í‘œì¤€
10.1 í…ŒìŠ¤íŠ¸  êµ¬ì¡°// app.js
const  helmet = require ('helmet' );
const  cors = require ('cors' );
const  rateLimit = require ('express-rate-limit' );
// ë³´ì•ˆ  í—¤ë”
app.use(helmet ());
// CORS ì„¤ì •
app.use(cors({
  origin: process .env. ALL O WED_ORIGINS ?.split(',') || ['http://localhost:3000' ],
  credentials: true
}));
// Rat e Limiting
const  limiter = rateLimit ({
  windowMs: 15 * 60 * 1000 , // 15ë¶„
  max: 100, // ìµœëŒ€  100 ìš”ì²­
  message: 'ë„ˆë¬´  ë§ì€  ìš”ì²­ì„  ë³´ëƒˆìŠµë‹ˆë‹¤ . ì ì‹œ  í›„  ë‹¤ì‹œ  ì‹œë„í•´ì£¼ì„¸ìš” .'
});
app.use('/api' , limiter );
// API íŠ¹ì •  ì—”ë“œí¬ì¸íŠ¸ì—  ëŒ€í•œ  ì—„ê²©í•œ  ì œí•œ
const  authLimiter = rateLimit ({
  windowMs: 15 * 60 * 1000 ,
  max: 5, // 15ë¶„ì—  5 ë²ˆë§Œ  í—ˆìš©
  message: 'ë¡œê·¸ì¸  ì‹œë„  íšŸìˆ˜ë¥¼  ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤ .'
});
app.use('/api/v1/auth/login' , authLimiter );
javascript

// tests/unit/s ervices/pr oduct.s ervice.test.js
const  ProductService  = require ('../../../src/services/product.service' );
const  ProductR epository  = require ('../../../src/repositories/product.repository' );
// Mock ì„¤ì •
jest.mock ('../../../src/repositories/product.repository' );
describe ('ProductService' , () => {
  describe ('getProducts' , () => {
    it('í•„í„°  ì—†ì´  ìƒí’ˆ  ëª©ë¡ì„  ì¡°íšŒí•   ìˆ˜  ìˆë‹¤ ', async  () => {
      // Giv en
      const  mockProducts = [
        { product_id: 1, product_name : 'í…ŒìŠ¤íŠ¸  ìƒí’ˆ ' }
      ];
      ProductR epository .findMany .mockResolvedValue(mockProducts );
      ProductR epository .count .mockResolvedValue( 1);
      
      // When
      const  result = await  ProductService .getProducts ({}, { page: 1, limit: 20 });
      
      // Then
      expect (result .products ).toEqual (mockProducts );
      expect (result .pagination .total).toBe( 1);
    });
    
    it('ì¹´í…Œê³ ë¦¬  í•„í„°ë¡œ  ìƒí’ˆì„  ì¡°íšŒí•   ìˆ˜  ìˆë‹¤ ', async  () => {
      // Giv en
      const  filters = { categoryId: 10 };
      ProductR epository .findMany .mockResolvedValue([]);
      
      // When
      await  ProductService .getProducts (filters , {});
      
      // Then
      expect (ProductR epository .findMany ).toHaveBeenCalledWith (
        expect .objectContaining ({ categoryId: 10 }),
        expect .any( Object )
      );
    });
  });
  
  describe ('createProduct' , () => {
    it('ìœ íš¨í•œ  ë°ì´í„°ë¡œ  ìƒí’ˆì„  ìƒì„±í•   ìˆ˜  ìˆë‹¤ ', async  () => {
      // Giv en
      const  userId = 1;
      const  productData = {

10.2 í†µí•©  í…ŒìŠ¤íŠ¸        product_name : 'ìƒˆ ìƒí’ˆ ',
        product_price : 10000
      };
      
      // When & Then
      // í…ŒìŠ¤íŠ¸  êµ¬í˜„ ...
    });
    
    it('ê°€ê²©ì´  0 ì´í•˜ì´ë©´  ì—ëŸ¬ë¥¼  ë°˜í™˜í•œë‹¤ ', async  () => {
      // Giv en
      const  productData = {
        product_name : 'ìƒˆ ìƒí’ˆ ',
        product_price : - 1000
      };
      
      // When & Then
      await  expect (
        ProductService .createProduct ( 1, productData )
      ).rejects .toThrow ('ê°€ê²©ì€  0 ë³´ë‹¤  ì»¤ì•¼  í•©ë‹ˆë‹¤ ');
    });
  });
});
javascript

// tests/int egration/pr oduct.t est.js
const  request = require ('supertest' );
const  app = require ('../../src/app' );
const  { PrismaClient  } = require ('@prisma/client' );
const  prisma = new PrismaClient ();
describe ('Product API Integration T ests', () => {
  let authT oken ;
  
  beforeAll ( async  () => {
    // í…ŒìŠ¤íŠ¸  ë°ì´í„°ë² ì´ìŠ¤  ì´ˆê¸°í™”
    await  prisma .$executeRaw `TRUNCA TE TABLE product CASCADE `;
    
    // í…ŒìŠ¤íŠ¸  ì‚¬ìš©ì  ë¡œê·¸ì¸
    const  response = await  request (app)
      .post('/api/v1/auth/login' )
      .send ({
        email: 'test@example.com' ,
        password: 'password123'
      });
    
    authT oken = response .body .data.token ;
  });
  
  afterAll ( async  () => {
    await  prisma .$disconnect ();
  });
  
  describe ('GET /api/v1/products' , () => {
    it('ìƒí’ˆ  ëª©ë¡ì„  ì¡°íšŒí•   ìˆ˜  ìˆë‹¤ ', async  () => {
      const  response = await  request (app)
        .get('/api/v1/products' )
        .expect ( 200);
      
      expect (response .body .success ).toBe( true);
      expect ( Array .isArray (response .body .data.products )).toBe( true);
    });
  });
  
  describe ('POST /api/v1/products' , () => {
    it('ì¸ì¦ëœ  ì‚¬ìš©ìëŠ”  ìƒí’ˆì„  ìƒì„±í•   ìˆ˜  ìˆë‹¤ ', async  () => {
      const  productData = {
        product_name : 'í…ŒìŠ¤íŠ¸  ìƒí’ˆ ',
        product_price : 10000 ,
        category_id: 1

11. ë°°í¬  ë°  ìš´ì˜
11.1 í™˜ê²½  êµ¬ì„±
í™˜ê²½ ìš©ë„ URL ë°ì´í„°ë² ì´ìŠ¤
Development ë¡œì»¬ ê°œë°œ localhost:3000 ë¡œì»¬ Supabase
Staging í†µí•© í…ŒìŠ¤íŠ¸ staging.fleecat.com Staging DB
Production ì‹¤ì œ ì„œë¹„ìŠ¤ api.fleecat.com Production DB
11.2 ë°°í¬  ì²´í¬ë¦¬ìŠ¤íŠ¸      };
      
      const  response = await  request (app)
        .post('/api/v1/products' )
        .set('Authorization' , `Bearer ${authT oken }`)
        .send (productData )
        .expect ( 201);
      
      expect (response .body .success ).toBe( true);
      expect (response .body .data.product_name ).toBe('í…ŒìŠ¤íŠ¸  ìƒí’ˆ ');
    });
    
    it('ì¸ì¦  ì—†ì´ëŠ”  ìƒí’ˆì„  ìƒì„±í•   ìˆ˜  ì—†ë‹¤ ', async  () => {
      await  request (app)
        .post('/api/v1/products' )
        .send ({ product_name : 'í…ŒìŠ¤íŠ¸ ' })
        .expect ( 401);
    });
  });
});
markdown

11.3 ë°°í¬  ìŠ¤í¬ë¦½íŠ¸## ë°°í¬  ì „  ì²´í¬ë¦¬ìŠ¤íŠ¸
### ì½”ë“œ  í’ˆì§ˆ
- [ ] ESLint ê²€ì‚¬  í†µê³¼
- [ ] ëª¨ë“   í…ŒìŠ¤íŠ¸  í†µê³¼
- [ ] ì½”ë“œ  ë¦¬ë·°  ì™„ë£Œ
### í™˜ê²½  ì„¤ì •
- [ ] í™˜ê²½ë³€ìˆ˜  ì„¤ì •  í™•ì¸
- [ ] Prisma ë§ˆì´ê·¸ë ˆì´ì…˜  ì ìš©
- [ ] ë°ì´í„°ë² ì´ìŠ¤  ë°±ì—…  ì™„ë£Œ
### ë³´ì•ˆ
- [ ] API í‚¤  ë°  ì‹œí¬ë¦¿  í™˜ê²½ë³€ìˆ˜  í™•ì¸
- [ ] CORS ì„¤ì •  í™•ì¸
- [ ] Rate Limiting ì„¤ì •  í™•ì¸
### ì„±ëŠ¥
- [ ] ë°ì´í„°ë² ì´ìŠ¤  ì¸ë±ìŠ¤  í™•ì¸
- [ ] ì¿¼ë¦¬  ìµœì í™”  í™•ì¸
- [ ] ë¡œê·¸  ë ˆë²¨  ì„¤ì •
### ë¬¸ì„œ
- [ ] API ë¬¸ì„œ  ì—…ë°ì´íŠ¸
- [ ] CHANGEL OG ì‘ì„±
- [ ] README ì—…ë°ì´íŠ¸
bash

11.4 ë¡œê¹…  ì „ëµ#!/bin/bash
# scripts/deplo y.sh
echo  "ğŸš€ Fleecat ë°°í¬  ì‹œì‘ ..."
# 1. í™˜ê²½  í™•ì¸
if [ -z "$NODE_ENV " ]; then
  echo  "âŒ NODE_ENV ê°€  ì„¤ì •ë˜ì§€  ì•Šì•˜ìŠµë‹ˆë‹¤ "
  exit 1
fi
echo  "ğŸ“¦ í™˜ê²½ : $NODE_ENV "
# 2. ì˜ì¡´ì„±  ì„¤ì¹˜
echo  "ğŸ“¥ íŒ¨í‚¤ì§€  ì„¤ì¹˜  ì¤‘ ..."
npm ci
# 3. Pr isma ë§ˆì´ê·¸ë ˆì´ì…˜
echo  "ğŸ—„  ë°ì´í„°ë² ì´ìŠ¤  ë§ˆì´ê·¸ë ˆì´ì…˜ ..."
npx prisma migrate deploy
# 4. Pr isma Client ìƒì„±
echo  "âš™  Prisma Client ìƒì„± ..."
npx prisma generate
# 5. í…ŒìŠ¤íŠ¸  ì‹¤í–‰
echo  "ğŸ§ª í…ŒìŠ¤íŠ¸  ì‹¤í–‰ ..."
npm test
# 6. ë¹Œë“œ  ( í•„ìš”ì‹œ )
# npm r un build
# 7. ì„œë²„  ì¬ì‹œì‘
echo  "ğŸ”„ ì„œë²„  ì¬ì‹œì‘ ..."
pm2 restart fleecat-api
echo  "âœ… ë°°í¬  ì™„ë£Œ !"
javascript

11.5 ëª¨ë‹ˆí„°ë§// utils/logger .js
const  winston = require ('winston' );
const  logger = winston .createLogger ({
  level: process .env. L OG_LEVEL  || 'info' ,
  format: winston .format .combine (
    winston .format .timestamp (),
    winston .format .errors ({ stack: true }),
    winston .format .json()
  ),
  transports: [
    // ì—ëŸ¬  ë¡œê·¸  íŒŒì¼
    new winston . transports . File({
      filename: 'logs/error.log' ,
      level: 'error'
    }),
    // ì „ì²´  ë¡œê·¸  íŒŒì¼
    new winston . transports . File({
      filename: 'logs/combined.log'
    })
  ]
});
// ê°œë°œ  í™˜ê²½ì—ì„œëŠ”  ì½˜ì†”  ì¶œë ¥
if (process .env. NODE_ENV  !== 'production' ) {
  logger .add( new winston . transports . Console ({
    format: winston .format .simple ()
  }));
}
module .exports  = logger ;
javascript

12. ë²„ì „  ê´€ë¦¬  ë°  í˜‘ì—…
12.1 Git ë¸Œëœì¹˜  ì „ëµ
12.2 ë¸Œëœì¹˜  ê·œì¹™
ë¸Œëœì¹˜  íƒ€ì… ëª…ëª… ê·œì¹™ ì„¤ëª…
main main í”„ë¡œë•ì…˜  ë°°í¬  ë¸Œëœì¹˜
develop develop ê°œë°œ í†µí•©  ë¸Œëœì¹˜
featur e feature/[ ê¸°ëŠ¥ëª… ] ìƒˆ ê¸°ëŠ¥  ê°œë°œ
bugfix bugfix/[ë²„ê·¸ëª… ] ë²„ê·¸ ìˆ˜ì •// ì£¼ìš”  ëª¨ë‹ˆí„°ë§  ì§€í‘œ
1. API ì„±ëŠ¥
   - ì‘ë‹µ  ì‹œê°„
   - ì—ëŸ¬ìœ¨
   - ìš”ì²­  ì²˜ë¦¬ëŸ‰ ( RPS)
2. ë°ì´í„°ë² ì´ìŠ¤
   - ì¿¼ë¦¬  ì‹¤í–‰  ì‹œê°„
   - ì»¤ë„¥ì…˜  í’€  ì‚¬ìš©ë¥ 
   - ìŠ¬ë¡œìš°  ì¿¼ë¦¬
3. ì‹œìŠ¤í…œ
   - CPU ì‚¬ìš©ë¥ 
   - ë©”ëª¨ë¦¬  ì‚¬ìš©ë¥ 
   - ë””ìŠ¤í¬  ì‚¬ìš©ë¥ 
4. ë¹„ì¦ˆë‹ˆìŠ¤  ì§€í‘œ
   - ì£¼ë¬¸  ìƒì„±  ìˆ˜
   - ê²°ì œ  ì„±ê³µë¥ 
   - ì‚¬ìš©ì  í™œë™
main (í”„ë¡œë•ì…˜ )
â”œâ”€â”€  develop ( ê°œë°œ )
â”‚   â”œâ”€â”€  feature/product-management
â”‚   â”œâ”€â”€  feature/order-system
â”‚   â”œâ”€â”€  feature/payment-integration
â”‚   â””â”€â”€  feature/admin-dashboard
â”œâ”€â”€  release/v1.0.0
â””â”€â”€  hotfix/critical-bug-fix

ë¸Œëœì¹˜  íƒ€ì… ëª…ëª… ê·œì¹™ ì„¤ëª…
hotfix hotfix/[ê¸´ê¸‰ìˆ˜ì • ] ê¸´ê¸‰ ìˆ˜ì •
release release/v[ ë²„ì „ ] ë¦´ë¦¬ìŠ¤  ì¤€ë¹„
12.3 ì»¤ë°‹  ë©”ì‹œì§€  ê·œì¹™
ì»¤ë°‹ íƒ€ì…
íƒ€ì… ì„¤ëª… ì˜ˆì‹œ
feat ìƒˆë¡œìš´  ê¸°ëŠ¥ feat: ìƒí’ˆ  í•„í„°ë§  ê¸°ëŠ¥  ì¶”ê°€
fix ë²„ê·¸ ìˆ˜ì • fix: ì£¼ë¬¸  ìƒì„±  ì‹œ  ì¬ê³   ê²€ì¦  ì˜¤ë¥˜  ìˆ˜ì •
docs ë¬¸ì„œ ìˆ˜ì • docs: API ë¬¸ì„œ  ì—…ë°ì´íŠ¸
style ì½”ë“œ í¬ë§·íŒ… style: ESLint ê·œì¹™  ì ìš©
refact or ì½”ë“œ ë¦¬íŒ©í† ë§ refactor: ìƒí’ˆ  ì„œë¹„ìŠ¤  ë¡œì§  ê°œì„ 
test í…ŒìŠ¤íŠ¸  ì¶”ê°€ test: ì£¼ë¬¸  API í†µí•©  í…ŒìŠ¤íŠ¸  ì¶”ê°€
chore ë¹Œë“œ/ì„¤ì •  ë³€ê²½ chore: íŒ¨í‚¤ì§€  ë²„ì „  ì—…ë°ì´íŠ¸
perf ì„±ëŠ¥ ê°œì„  perf: ìƒí’ˆ  ì¡°íšŒ  ì¿¼ë¦¬  ìµœì í™”
ì˜ˆì‹œ
12.4 Pull R equest í…œí”Œë¦¿[íƒ€ì… ]: [ê°„ë‹¨í•œ  ì„¤ëª… ]
[ìƒì„¸  ì„¤ëª…  ( ì„ íƒ )]
[ì´ìŠˆ  ë²ˆí˜¸  ( ì„ íƒ )]
bash
feat: ìƒí’ˆ  ì¥ë°”êµ¬ë‹ˆ  ë‹´ê¸°  ê¸°ëŠ¥  ì¶”ê°€
- ì¥ë°”êµ¬ë‹ˆ  API ì—”ë“œí¬ì¸íŠ¸  êµ¬í˜„
- ì¤‘ë³µ  ìƒí’ˆ  ìˆ˜ëŸ‰  ì¦ê°€  ë¡œì§  ì¶”ê°€
- ì¬ê³   ë¶€ì¡±  ì‹œ  ì—ëŸ¬  ì²˜ë¦¬
Closes #123
markdown

12.5 ì½”ë“œ  ë¦¬ë·°  ì²´í¬ë¦¬ìŠ¤íŠ¸## ë³€ê²½  ì‚¬í•­
<!-- ì´  PR ì—ì„œ  ë³€ê²½ëœ  ë‚´ìš©ì„  ì„¤ëª…í•´ì£¼ì„¸ìš”  -->
## ë³€ê²½  ì´ìœ 
<!-- ì™œ  ì´  ë³€ê²½ì´  í•„ìš”í•œì§€  ì„¤ëª…í•´ì£¼ì„¸ìš”  -->
## í…ŒìŠ¤íŠ¸  ë°©ë²•
<!-- ì´  ë³€ê²½ì‚¬í•­ì„  ì–´ë–»ê²Œ  í…ŒìŠ¤íŠ¸í•   ìˆ˜  ìˆëŠ”ì§€  ì„¤ëª…í•´ì£¼ì„¸ìš”  -->
## ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì½”ë“œê°€  ì»¨ë²¤ì…˜ì„  ë”°ë¦…ë‹ˆë‹¤
- [ ] í…ŒìŠ¤íŠ¸ë¥¼  ì¶”ê°€ / ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤
- [ ] ë¬¸ì„œë¥¼  ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤
- [ ] ëª¨ë“   í…ŒìŠ¤íŠ¸ê°€  í†µê³¼í•©ë‹ˆë‹¤
- [ ] ë¸Œë ˆì´í‚¹  ì²´ì¸ì§€ê°€  ì—†ìŠµë‹ˆë‹¤
## ìŠ¤í¬ë¦°ìƒ·  ( ì„ íƒ )
<!-- API ì‘ë‹µì´ë‚˜  ë¡œê·¸  ë“±ì„  ì²¨ë¶€í•´ì£¼ì„¸ìš”  -->
## ê´€ë ¨  ì´ìŠˆ
<!-- ê´€ë ¨ëœ  ì´ìŠˆ  ë²ˆí˜¸ë¥¼  ì ì–´ì£¼ì„¸ìš”  -->
Closes #ì´ìŠˆë²ˆí˜¸
markdown

ë¶€ë¡
A. ìì£¼  ì‚¬ìš©í•˜ëŠ”  Prisma ì¿¼ë¦¬  íŒ¨í„´## ê¸°ëŠ¥ì„±
- [ ] ìš”êµ¬ì‚¬í•­ì„  ì¶©ì¡±í•˜ëŠ”ê°€ ?
- [ ] ì—£ì§€  ì¼€ì´ìŠ¤ë¥¼  ì²˜ë¦¬í•˜ëŠ”ê°€ ?
- [ ] ì—ëŸ¬  ì²˜ë¦¬ê°€  ì ì ˆí•œê°€ ?
## ì½”ë“œ  í’ˆì§ˆ
- [ ] ì½”ë”©  ì»¨ë²¤ì…˜ì„  ë”°ë¥´ëŠ”ê°€ ?
- [ ] í•¨ìˆ˜ / ë³€ìˆ˜ëª…ì´  ëª…í™•í•œê°€ ?
- [ ] ì¤‘ë³µ  ì½”ë“œê°€  ì—†ëŠ”ê°€ ?
- [ ] ì£¼ì„ì´  ì ì ˆí•œê°€ ?
## ì„±ëŠ¥
- [ ] ë¶ˆí•„ìš”í•œ  ë°ì´í„°ë² ì´ìŠ¤  ì¿¼ë¦¬ê°€  ì—†ëŠ”ê°€ ?
- [ ] N+1 ì¿¼ë¦¬  ë¬¸ì œê°€  ì—†ëŠ”ê°€ ?
- [ ] ë©”ëª¨ë¦¬  ëˆ„ìˆ˜  ê°€ëŠ¥ì„±ì´  ì—†ëŠ”ê°€ ?
## ë³´ì•ˆ
- [ ] ì…ë ¥  ê²€ì¦ì´  ì¶©ë¶„í•œê°€ ?
- [ ] SQL ì¸ì ì…˜  ìœ„í—˜ì´  ì—†ëŠ”ê°€ ?
- [ ] ë¯¼ê°í•œ  ë°ì´í„°ê°€  ë…¸ì¶œë˜ì§€  ì•ŠëŠ”ê°€ ?
- [ ] ì¸ì¦ /ì¸ê°€ê°€  ì ì ˆí•œê°€ ?
## í…ŒìŠ¤íŠ¸
- [ ] ë‹¨ìœ„  í…ŒìŠ¤íŠ¸ê°€  ìˆëŠ”ê°€ ?
- [ ] í†µí•©  í…ŒìŠ¤íŠ¸ê°€  í•„ìš”í•œê°€ ?
- [ ] í…ŒìŠ¤íŠ¸  ì»¤ë²„ë¦¬ì§€ê°€  ì¶©ë¶„í•œê°€ ?
javascript

// 1. ê¸°ë³¸  CRUD
const  product = await  prisma .product .create ({ data: {...} });
const  products = await  prisma .product .findMany ();
const  product = await  prisma .product .findUnique ({ where: { product_id: 1 } });
const  updated = await  prisma .product .update ({ where: {...}, data: {...} });
const  deleted = await  prisma .product .delete ({ where: {...} });
// 2. ê´€ê³„  í¬í•¨  ì¡°íšŒ
const  product = await  prisma .product .findUnique ({
  where: { product_id: 1 },
  include: {
    tenant_member : true,
    category: true,
    product_images : true
  }
});
// 3. ì„ íƒì   í•„ë“œ  ì¡°íšŒ
const  products = await  prisma .product .findMany ({
  select: {
    product_id: true,
    product_name : true,
    product_price : true
  }
});
// 4. í•„í„°ë§
const  products = await  prisma .product .findMany ({
  where: {
    product_status : 'active' ,
    product_price : {
      gte: 10000 ,
      lte: 50000
    },
    OR: [
      { category_id: 1 },
      { category_id: 2 }
    ]
  }
});
// 5. ì •ë ¬  ë°  í˜ì´ì§€ë„¤ì´ì…˜
const  products = await  prisma .product .findMany ({
  orderBy: { product_created_at : 'desc'  },
  skip: 20,
  take: 10

B. í™˜ê²½ë³€ìˆ˜  ì˜ˆì‹œ
C. ìœ ìš©í•œ  NPM ìŠ¤í¬ë¦½íŠ¸});
// 6. ì§‘ê³„
const  count = await  prisma .product .count ();
const  sum = await  prisma .order .aggregate ({
  _sum: { order_total_amount : true }
});
bash
# .en v.example
# Ser ver
NODE_ENV=development
PORT= 3000
# Dat abase
DATABASE_URL=postgresql://user:password@localhost:5432/fleecat
# Sup abase
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY =xxxxx
SUPABASE_SERVICE_KEY =xxxxx
# JW T
JWT_SECRET=your-secret-key-here
JWT_EXPIRES_IN =7d
# CORS
ALLOWED_ORIGINS =http://localhost:3000,http://localhost:3001
# File Uplo ad
MAX_FILE_SIZE = 5242880
# Rat e Limiting
RATE_LIMIT_WINDO W_MS= 900000
RATE_LIMIT_MAX_REQUEST S= 100
# Logging
LOG_LEVEL=info
json

ë¬¸ì„œ ì´ë ¥
ë²„ì „ ë‚ ì§œ ë³€ê²½ ë‚´ìš© ì‘ì„±ì
1.0 2025.09.30 ìµœì´ˆ ì‘ì„± ë°±ì—”ë“œíŒ€
ë¬¸ì„œ ë
ì´ ë¬¸ì„œëŠ”  Fleecat ë°±ì—”ë“œ  ê°œë°œì˜  ëª¨ë“   í‘œì¤€ì„  ì •ì˜í•©ë‹ˆë‹¤ .
ëª¨ë“  ê°œë°œìëŠ”  ì´  ê°€ì´ë“œë¥¼  ìˆ™ì§€í•˜ê³   ì¤€ìˆ˜í•´ì•¼  í•©ë‹ˆë‹¤ .{
  "scripts": {
    "dev": "nodemon src/server.js" ,
    "start": "node src/server.js" ,
    "test": "jest --coverage" ,
    "test:watch" : "jest --watch" ,
    "lint": "eslint src/**/*.js" ,
    "lint:fix": "eslint src/**/*.js --fix" ,
    "prisma:generate" : "prisma generate" ,
    "prisma:migrate" : "prisma migrate dev" ,
    "prisma:studio" : "prisma studio" ,
    "prisma:seed" : "node prisma/seed.js"
  }
}

