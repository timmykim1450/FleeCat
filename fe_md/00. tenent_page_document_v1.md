# Admin 상품 페이지 프론트엔드 기획 초안 (Tenant Console 중심, 변수 레퍼런스 반영)

> 목적: 테넌트(입점사) 관리자가 자사 상품을 **등록, 편집, 관리**할 수 있는 UI/UX 설계 초안. 운영자 콘솔은 별도 문서로 분리.

---

## 1) 배경 & 목표
- **문제**: 테넌트 관리자는 빠르고 직관적으로 상품을 등록하고 관리할 수 있어야 함.
- **목표**:
  - 상품 등록 평균 소요시간 ≤ 3분
  - 필수값 검증 실패율 ≤ 2%
  - 대량 작업은 최소 클릭으로 처리 가능

---

## 2) 사용자 역할 (현재 범위)
- **TenantAdmin (입점사 관리자)**: 자사 상품 전체 CRUD, 퍼블리시/비공개, 가격·재고·옵션 관리, 이미지/SEO 관리.

> Viewer, Editor 등 세부 권한은 추후 확장 고려.

---

## 3) 화면 구조

### 3.1 라우팅
- `/tenant/products` : 상품 리스트
- `/tenant/products/new` : 신규 등록
- `/tenant/products/:id` : 상세/편집 (탭 구조)
  - 기본정보 (product_name, category_id, tenant_member_id)
  - 가격/재고 (product_price, product_quantity)
  - 옵션(Variants)
  - 이미지/미디어 (product_img_url, product_img_sequence)
  - 설명/콘텐츠 (product_description)
  - SEO/노출설정 (슬러그, meta_title, meta_description)

### 3.2 리스트 UX
- 상단: 검색(상품명 `product_name`, SKU, 태그, 카테고리 `category_id`)
- 필터: 상태(`product_status`), 품절 여부(product_quantity=0), 가격대(`product_price`), 업데이트일(`product_updated_at`)
- 정렬: 업데이트일(`product_updated_at`), 판매량, 가격(`product_price`)
- 표 컬럼: 썸네일(`product_img_url`), 상품명(`product_name`), 상태(`product_status`), 가격범위(`product_price`), 재고합계(`product_quantity`), 카테고리(`category_name`), 업데이트일(`product_updated_at`)
- Bulk 액션: 노출/비노출(`product_status`), 가격 조정(`product_price`), 삭제, 태그 추가/제거

### 3.3 등록/편집 플로우
1) 기본정보 입력 (product_name, category_id)
2) 옵션셋 생성
3) SKU 조합 생성/편집
4) 가격·재고 입력 (product_price, product_quantity)
5) 이미지 업로드(product_img_url, product_img_sequence)
6) 미리보기
7) 저장(Draft → product_status=draft)
8) 퍼블리시(Publish → product_status=active)

> Autosave: product_updated_at 기준 Draft 저장. 충돌 시 UI 안내.

---

## 4) 데이터 모델 (프론트 관점, 변수명 매핑)
- **product**: product_id, tenant_member_id, product_name, product_description, product_status, product_price, product_quantity, category_id, product_created_at, product_updated_at
- **category**: category_id, category_name, category_parent_id
- **product_img**: product_img_id, product_img_url, product_img_sequence, product_id
- **tenant_member**: tenant_member_id, tenant_id, member_id

상태값 예시: product_status = draft | active | sold_out | inactive【100†files_uploaded_in_conversation】

---

## 5) 컴포넌트 설계
- Layout: TenantAdminShell
- List: DataGrid(상품 리스트)
- Form: ProductForm(React Hook Form + Zod)
- Option Builder: 옵션셋 추가/값 입력 → SKU 테이블 생성
- MediaUploader: product_img_url 업로드/정렬/대표 지정
- Preview: 상품 미리보기
- Confirm/UnsavedGuard: 이탈 방지, 충돌 감지

---

## 6) API 연동 가이드 (프론트 기준 요약)

### 6.1 네임스페이스
- 테넌트 콘솔: `/api/tenant/:tenantId/...`

### 6.2 주요 엔드포인트
- `GET /api/tenant/:tenantId/products` → product 리스트
- `POST /api/tenant/:tenantId/products` → Draft 생성
- `GET /api/tenant/:tenantId/products/:product_id`
- `PUT /api/tenant/:tenantId/products/:product_id` (If-Match: product_updated_at)
- `POST /api/tenant/:tenantId/products/:product_id/publish` (status 변경)
- `POST /api/tenant/:tenantId/products/:product_id/archive`
- `POST /api/tenant/:tenantId/media/sign` → product_img_url 업로드용 signed URL

### 6.3 요청/응답 규약
- 요청 헤더: `Authorization: Bearer <JWT>`
- 응답 헤더: `x-version`, `x-trace-id`
- 응답 데이터 필드: product_id, product_name, product_price, product_quantity, product_status, product_created_at, product_updated_at

---

## 7) 보안·운영 가드레일
- JWT에 `tenant_id`, `tenant_member_id` 포함
- product 수정 시 tenant_member_id 교차 검증
- 이미지 업로드: 허용 확장자/용량 제한, product_img_url 저장

---

## 8) 성능 & UX
- 서버 페이징 (limit, offset)
- 낙관적 업데이트: product_status, product_price, product_quantity
- Skeleton UI: product_list 로딩 시 표시

---

## 9) 테스트 전략
- 단위: product_name/price/quantity 검증
- 통합: product_status 전환, product_img 업로드
- E2E: 신규 등록 → 이미지 업로드 → 퍼블리시

---

## 10) 릴리즈 범위
- **MVP**: product 등록/리스트/편집, 이미지 업로드, Draft→Publish
- **V1**: SEO 필드, 태그, Bulk 액션
- **V1.1**: 예약판매, 번들상품

---

## 11) 구현 체크리스트
- [ ] 라우팅/레이아웃
- [ ] 상품 리스트 (product_id, product_name, product_price, product_status, product_quantity)
- [ ] ProductForm (Zod 검증: product_name, product_price>=0, product_quantity>=0)
- [ ] Option Builder
- [ ] MediaUploader (product_img_url)
- [ ] Autosave (product_updated_at 기준)
- [ ] 퍼블리시/아카이브 모달 (product_status 전환)
- [ ] Empty/Loading/Error 화면
- [ ] E2E 시나리오: 신규 product 생성→퍼블리시

---

